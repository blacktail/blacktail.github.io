<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>Beyond ES6(ES2015)</title>

		<link rel="stylesheet" href="dist/reset.css">
		<link rel="stylesheet" href="dist/reveal.css">
		<link rel="stylesheet" href="dist/theme/moon.css">

		<!-- Theme used for syntax highlighted code -->
		<link rel="stylesheet" href="plugin/highlight/monokai.css">
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
				<section>
					<h1>Beyond ES6(ES2015)</h1>
						<p>
							<small>Shared by
								<a href="mailto: percy.zhang@57blocks.com">Percy Zhang <sub>@57blocks.com</sub></a>
							</small>
						</p>


				</section>
				<section>
					<h1>
					ES2016
					</h1>
					<ul>
						<li>Array.prototype.includes()</li>
					</ul>
						<pre>
						<code data-trim data-noescape  class="js" data-line-numbers>
							<script type="text/template">
							let array = [1, 2, 4, 5]
							array.includes(2)
							// true
							array.includes(3)
							// false

							</script>
							
						</code>

						</pre>

				</section>
				<section>
					<p>Array.prototype.includes()</p>
					<pre>
					<code data-trim data-noescape class="js" data-line-numbers>
					let array = [1, 3, 5, 7, 9, 11]
					array.includes(3, 1)
					// find the number 3 starting from array index 1
					// true
					array.includes(5, 4)
					// false
					array.includes(1, -1)
					// false
					array.includes(11, -3)
					// true
						
						
					</code>
					</pre>

				</section>
				<section>
					<p>exponential operator</p>
					<pre>
					<code data-trim data-noescape class="js" data-line-numbers>
						2 ** 2
						// 4
						2 ** 3
						// 8
						2 ** (2 ** 2)
						// 16
						Math.pow(Math.pow(2, 2), 2)
						// 16
						
						
					</code>
					</pre>

				</section>
				<section>
					<h1>
					ES2017
					</h1>
					<ul>
						<li>String padding</li>
					</ul>
						<pre>
						<code data-trim data-noescape  class="js" data-line-numbers>
							<script type="text/template">
								'hi'.padStart(10)
								// 10 - 2 = 8 empty spaces
								// "        hi"
								'1'.padStart(3, 0)
								// "001"

							</script>
							
						</code>

						</pre>
				</section>
				<section>
					<p>Object.entries() and Object.values()</p>
					<pre>
					<code data-trim data-noescape class="js" data-line-numbers>
						const family = {
							father: 'Jonathan Kent',
							mother: 'Martha Kent',
							son: 'Clark Kent',
						}

						Object.keys(family)
						// ["father", "mother", "son"]
						Object.values(family)
						// ["Jonathan Kent", "Martha Kent", "Clark Kent"]
						Object.entries(family)
						// ["father", "Jonathan Kent"]
						// ["mother", "Martha Kent"]
						// ["son", "Clark Kent"]
					</code>
					</pre>
				</section>
				<section>
					<p>Object.getOwnPropertyDescriptors()</p>
					<pre>
					<code data-trim data-noescape class="js" data-line-numbers>
						const myObj = {
							name: 'Alberto',
							age: 25,
							greet() {
							  console.log('hello')
							},
						}
						Object.getOwnPropertyDescriptors(myObj)
						// age:{value: 25, writable: true, enumerable: true, configurable: true}
						// greet:{value: Æ’, writable: true, enumerable: true, configurable: true}
						// name:{value: "Alberto", writable: true, enumerable: true, configurable: true}
					</code>
					</pre>
				</section>
				<section>
					<p>Shared memory and Atomics</p>
					<pre>
					<code data-trim data-noescape class="js" data-line-numbers>
						// create a `SharedArrayBuffer`
						const buffer = new SharedArrayBuffer(16)
						const uint8 = new Uint8Array(buffer)
						// add a value at the first position
						uint8[0] = 10
						console.log(Atomics.sub(uint8, 0, 5))
						// 10
						// 10 - 5 = 5
						console.log(uint8[0])
						// 5
						console.log(Atomics.store(uint8, 0, 3))
						// 3
						console.log(Atomics.load(uint8, 0))
						// 3
					</code>
					</pre>
				</section>
				<section>
					<p>Async Await</p>
					<pre>
					<code data-trim data-noescape class="js" data-line-numbers>
						async function asyncFunc() {
							try {
								let response = await fetch('http:your-url')
							} catch (err) {
								console.log(err)
							}
						}
						asyncFunc()
					</code>
					</pre>
					<p><a href="https://mathiasbynens.be/notes/async-stack-traces"> why await beats Promise#then()</a></a></p>
				</section>
				<section>
					<h1>
					ES2018
					</h1>
					<p>Rest / Spread for Objects</p>
					<pre>
					<code data-trim data-noescape class="js" data-line-numbers>
						let myObj = {
							a: 1,
							b: 3,
							c: 5,
							d: 8,
						}
						// we use the rest operator to grab everything else left in the object.
						let { a, b, ...z } = myObj
						console.log(a) // 1
						console.log(b) // 3
						console.log(z) // {c: 5, d: 8}
						// using the spread syntax we cloned our Object
						let clone = { ...myObj }
						console.log(clone)
						// {a: 1, b: 3, c: 5, d: 8}
						myObj.e = 15
						console.log(clone)
						// {a: 1, b: 3, c: 5, d: 8}
						console.log(myObj)
						// {a: 1, b: 3, c: 5, d: 8, e: 15}
					</code>
					</pre>
				</section>
				<section>
					<p>Asynchronous Iteration</p>
					<pre>
					<code data-trim data-noescape class="js" data-line-numbers>
						const asyncIterable = {
							[Symbol.asyncIterator]() {
							  return {
							    i: 0,
							    next() {
							      if (this.i < 3) {
								return Promise.resolve({ value: this.i++, done: false });
							      }
						      
							      return Promise.resolve({ done: true });
							    }
							  };
							}
						};
						      
						(async function() {
							for await (let num of asyncIterable) {
							   console.log(num);
							}
						})();
						
					</code>
					</pre>
				</section>
				<section>
					<p>Asynchronous Iteration</p>
					<pre>
					<code data-trim data-noescape class="js" data-line-numbers>
						async function* asyncGenerator() {
							let i = 0;
							while (i < 3) {
							  yield i++;
							}
						}
						      
						(async function() {
							for await (let num of asyncGenerator()) {
							  console.log(num);
							}
						})();
						
						
					</code>
					</pre>
				</section>
				<section>
					<p>Asynchronous Iteration</p>
					<pre>
					<code data-trim data-noescape class="js" data-line-numbers>
						function* generator() {
							yield 0;
							yield 1;
							yield Promise.resolve(2);
							yield Promise.resolve(3);
							yield 4;
						}
						      
						(async function() {
							for await (let num of generator()) {
							  console.log(num);
							}
						})();
					</code>
					</pre>
				</section>
				<section>
					<p>Promise.prototyp.finally()</p>
					<pre>
					<code data-trim data-noescape class="js" data-line-numbers>
						const myPromise = new Promise((resolve, reject) => {
							resolve()
						})

						myPromise
							.then(() => {
							  console.log('still working')
							})
							.catch(() => {
							  console.log('there was an error')
							})
							.finally(() => {
							  console.log('Done!')
							})
					</code>
					</pre>
				</section>
				<section>
					<p>RegExp features</p>
					<p>s(dotAll) flag</p>
					<pre>
					<code data-trim data-noescape class="js" data-line-numbers>
						;/foo.bar/s.test('foo\nbar')
					</code>
					</pre>
				</section>
				<section>
					<p>RegExp features</p>
					<p>(?&lt;name&gt;...)</p>
					<pre>
					<code data-trim data-noescape class="js" data-line-numbers>
						let re = /(?<year>\d{4})-(?<month>\d{2})-(?<day>\d{2})/u
						let result = re.exec('2015-01-02')
						// result.groups.year === '2015';
						// result.groups.month === '01';
						// result.groups.day === '02';
						// result[0] === '2015-01-02';
						// result[1] === '2015';
						// result[2] === '01';
						// result[3] === '02';
					</code>
					</pre>
				</section>
				<section>
					<h1>
					ES2019
					</h1>
					<p>Array.prototype.flat()</p>
					<pre>
						<code data-trim data-noescape class="js" data-line-numbers>
							const letters = ['a', 'b', ['c', 'd', ['e', 'f']]]
							// default depth of 1
							letters.flat()
							// ['a', 'b', 'c', 'd', ['e', 'f']]
							// depth of 2
							letters.flat(2)
							// ['a', 'b', 'c', 'd', 'e', 'f']
							// which is the same as executing flat with depth of 1 twice
							letters.flat().flat()
							// ['a', 'b', 'c', 'd', 'e', 'f']
							// Flattens recursively until the array contains no nested arrays
							letters.flat(Infinity)
							// ['a', 'b', 'c', 'd', 'e', 'f']
						</code>
					</pre>
				</section>
				<section>
					<p>Array.prototype.flatMap()</p>
					<pre>
						<code data-trim data-noescape class="js" data-line-numbers>
							let greeting = ['Greetings from', ' ', 'Vietnam']
							// let's first try using a normal `map()` function
							greeting.map((x) => x.split(' '))
							// ["Greetings", "from"]
							// ["", ""]
							// ["Vietnam"]
							greeting.flatMap((x) => x.split(' '))
							// ["Greetings", "from", "", "", "Vietnam"]
						</code>
					</pre>
				</section>
				<section>
					<p>Object.fromEntries()</p>
					<pre>
						<code data-trim data-noescape class="js" data-line-numbers>
							const keyValueArray = [
								['key1', 'value1'],
								['key2', 'value2'],
							]
							const obj = Object.fromEntries(keyValueArray)
							// {key1: "value1", key2: "value2"}
						</code>
					</pre>
				</section>
				<section>
					<p>String.prototype.trimStart() / .trimEnd()</p>
					<pre>
						<code data-trim data-noescape class="js" data-line-numbers>
							let str = '    this string has a lot of whitespace   '
							str.length
							// 42
							str = str.trimStart()
							// "this string has a lot of whitespace   "
							str.length
							// 38
							str = str.trimEnd()
							// "this string has a lot of whitespace"
							str.length
							// 35
						</code>
					</pre>
				</section>
				<section>
					<p>Optional Catch Binding</p>
					<pre>
						<code data-trim data-noescape class="js" data-line-numbers>
							// Before
							try {
								...
							} catch(error) {
								...
							}
							// ES2019
							try {
								...
							} catch {
								...
							}
						</code>
					</pre>
				</section>
				<section>
					<p>Functionâ€‹.prototypeâ€‹.toString()</p>
					<pre>
						<code data-trim data-noescape class="js" data-line-numbers>
							function sum(a, b) {
								// perform a sum
								return a + b
							}
							console.log(sum.toString())
							// function sum(a, b) {
							//   // perform a sum
							//   return a + b;
							// }
							
						</code>
					</pre>
				</section>
				<section>
					<h1>ES2020</h1>
					<p>Optional Chaining</p>
					<pre>
						<code data-trim data-noescape class="js" data-line-numbers>
							const student = {
								name: 'Test',
								age: 20,
								address: {
									street: {
										number: 30,
										name: 'Oxford'
									}
								}
							}

							const streetNumber = student?.address?.street?.number
						</code>
					</pre>
				</section>
				<section>
					<p>globalThis</p>
					<pre>
						<code data-trim data-noescape class="js" data-line-numbers>
							// browser
							console.log(window === globalThis)

							// node
							console.log(global === globalThis)
						</code>
					</pre>
				</section>
				<section>
					<p>BigInt</p>
					<pre>
						<code data-trim data-noescape class="js" data-line-numbers>
							const num = Number.MAX_SAFE_INTEGER
							// 9007199254740991 (pow(2, 53) - 1 )

							const bigNum = 9007199254740992n

							++bigNum
							// 9007199254740993n

						</code>
					</pre>
				</section>
				<section>
					<p>Dynamic Import</p>
					<pre>
						<code data-trim data-noescape class="js" data-line-numbers>
const ShoppingCart = lazy(
  () => import(/* webpackChunkName: "shoppingcart" */ 'features/ShoppingCart')
);

						</code>
					</pre>
				</section>
				<section>
					<p>Nullish Coalescing</p>
					<pre>
						<code data-trim data-noescape class="js" data-line-numbers>
							false ?? 'some truthy value'
							// false

							undefined ?? 'some truthy value'
							// some truthy value

							null ?? 'some truthy value'
							// some truthy value

							NaN ?? 'some truthy value'
							// NaN

						</code>
					</pre>
				</section>
				<section>
					<p>Promise.allSettled</p>
					<pre>
						<code data-trim data-noescape class="js" data-line-numbers>
							const myPromiseArray = [
								Promise.resolve(100),
								Promise.reject(null),
								Promise.reject(new Error('Oh No'))
							]

							Promise.allSettled(myPromiseArray)

						</code>
					</pre>
				</section>
				<section>
					<p>export * as moduleName from '...'</p>
					<pre>
						<code data-trim data-noescape class="js" data-line-numbers>
							export * as utils from './utils.js'

							// import * as utils from './utils.mjs'
							// export { utils }


						</code>
					</pre>
				</section>
				<section>
					<p>Well defined for-in order</p>
				</section>
				<section>
					<p>Private class fields</p>
					<pre>
						<code data-trim data-noescape class="js" data-line-numbers>
							class ClassWithPrivateField {
								#privateField;
							      
								constructor() {
								  this.#privateField = 42;
								}
							}
							      
							class SubClass extends ClassWithPrivateField {
								#subPrivateField;
							      
								constructor() {
								  super();
								  this.#subPrivateField = 23;
								}
							}
							      
							new SubClass();
							// SubClass {#privateField: 42, #subPrivateField: 23}


						</code>
					</pre>

				</section>
				<section>
					<h1>ES2021</h1>
					<p>Underscores as Numeric Seperator</p>
					<pre>
						<code data-trim data-noescape class="js" data-line-numbers>
							const billion = 1000_000_000;
							console.log(billion); // 1000000000

							const trillion = 1000_000_000_000n;
							console.log(trillion.toString()); // "1000000000000"



						</code>
					</pre>
				</section>
				<section>
					<p>Logical Assignment Operator</p>
					<pre>
						<code data-trim data-noescape class="js" data-line-numbers>
							var x = 1;
							var y = 2;
							x &&= y;
							console.log(x); // 2
							// x && (x = y);

							x &&= y;
							x ||= y;
							x ??= y;
						</code>
					</pre>
				</section>
				<section>
					<p>String.prototype.replaceAll()</p>
					<pre>
						<code data-trim data-noescape class="js" data-line-numbers>
							const str = "Backbencher sits at the Back";
							const newStr = str.replaceAll("Back", "Front");
							console.log(newStr); // "Frontbencher sits at the Front"
						</code>
					</pre>
				</section>
				<section>
					<p>Promise.any</p>
					<ul>
						<li>
							Promise.race is settled as soon as any of the promises you feed it settle, whether they are fulfilled or rejected.

						</li>
						<li>
						Promise.any is settled as soon as any of the promises you feed it is fulfilled or they are all rejected, in which case it's rejected with an AggregateError.</p>

						</li>
					</ul>
				</section>
				




			</div>
		</div>

		<script src="dist/reveal.js"></script>
		<script src="plugin/notes/notes.js"></script>
		<script src="plugin/markdown/markdown.js"></script>
		<script src="plugin/highlight/highlight.js"></script>
		<script>
			// More info about initialization & config:
			// - https://revealjs.com/initialization/
			// - https://revealjs.com/config/
			Reveal.initialize({
				hash: true,

				// Learn about plugins: https://revealjs.com/plugins/
				plugins: [ RevealMarkdown, RevealHighlight, RevealNotes ]
			});
		</script>
	</body>
</html>
