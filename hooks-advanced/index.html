<!doctype html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

	<title>Advanced Hooks</title>

	<link rel="stylesheet" href="dist/reset.css">
	<link rel="stylesheet" href="dist/reveal.css">
	<link rel="stylesheet" href="dist/theme/moon.css">

	<!-- Theme used for syntax highlighted code -->
	<link rel="stylesheet" href="plugin/highlight/monokai.css">
</head>

<body>
	<div class="reveal">
		<div class="slides">
			<section>
				<h1>Advanced React Hooks </h1>
				<p>
					<small>Shared by
						<a href="mailto: percy.zhang@57blocks.com">Percy Zhang
							<sub>@57blocks.com</sub></a>
					</small>
				</p>


			</section>
			<section>
				<p>
					<a href="https://reactjs.org/docs/hooks-intro.html"
						target="_blank">ä¸ºä»€ä¹ˆè¦æœ‰Hooks</a>
				</p>
				<ul>
					<li>ç»„ä»¶åŒ–æ€æƒ³</li>
					<li>å»ClassåŒ–</li>
					<li>ç»„åˆä¼˜äºç»§æ‰¿</li>
				</ul>
			</section>
			<section>
				<p>
					<a href="https://blacktail.github.io/hooks/" target="_blank">Hooksçš„åŸç†</a>
				</p>
			</section>
			<section>
				<p>
					<a href="https://ahooks.js.org/zh-CN/hooks/advanced/use-creation"
						target="_blank">React è‡ªå¸¦çš„Hooks</a>
				</p>
				<ul style="max-height: 600px; overflow: auto;">
					<li>----- Basic Hooks -----</li>
					<li>
						useState
					</li>
					<li>
						useEffect
					</li>
					<li>
						useContext
					</li>
					<li>----- Additional Hooks -----</li>
					<li>
						useReducer
					</li>
					<li>
						useCallback
					</li>
					<li>
						useMemo
					</li>
					<li>
						useRef
					</li>
					<li>
						useImperativeHandle
					</li>
					<li>
						useLayoutEffect
					</li>
					<li>
						useDebugValue
					</li>
					<li>----- React 18 Hooks -----</li>
					<li>useSyncExternalStore (for Tearing ğŸ¶ )</li>
					<li>useId</li>
					<li>useInsertionEffect</li>

				</ul>
			</section>
			<section>
				<p>
					<a href="https://ahooks.js.org/zh-CN/hooks/advanced/use-creation"
						target="_blank">Hooksç›¸å…³çš„åº“</a>
				</p>
				<ul>
					<li><a href="https://github.com/streamich/react-use"
							target="_blank">react-use</a></li>
					<li><a href="https://ahooks.js.org/" target="_blank">ahooks</a></li>

				</ul>
			</section>
			<section>
				<p>
					<a href="https://ahooks.js.org/zh-CN/hooks/use-creation"
						target="_blank">useCreation</a>
				</p>
				<p>Understanding from source code</p>
				<pre>
					<code data-trim data-noescape  class="js" data-line-numbers>
						export default function useCreation<T>(factory: () => T, deps: any[]) {
							const { current } = useRef({
							  deps,
							  obj: undefined as undefined | T,
							  initialized: false,
							});

							if (current.initialized === false || !depsAreSame(current.deps, deps)) {
							  current.deps = deps;
							  current.obj = factory();
							  current.initialized = true;
							}
							return current.obj as T;
						}
						
						
					</code>

					</pre>

			</section>
			<section>
				<p>
					<a href="https://ahooks.js.org/zh-CN/hooks/use-memoized-fn"
						target="_blank">useMemoizedFn</a>
				</p>
				<p>Understanding from source code</p>
				<pre>
			<code data-trim data-noescape  class="js" data-line-numbers>

	function useMemoizedFn<T extends noop>(fn: T) {
	if (process.env.NODE_ENV === 'development') {
	  if (typeof fn !== 'function') {
	    console.error(`useMemoizedFn expected parameter is a function, got ${typeof fn}`);
	  }
	}
      
	const fnRef = useRef<T>(fn);
      
	// why not write `fnRef.current = fn`?
	// https://github.com/alibaba/hooks/issues/728
	fnRef.current = useMemo(() => fn, [fn]);
      
	const memoizedFn = useRef<T>();
	if (!memoizedFn.current) {
	  memoizedFn.current = function (...args) {
	    // eslint-disable-next-line @typescript-eslint/no-invalid-this
	    return fnRef.current.apply(this, args);
	  } as T;
	}
      
	return memoizedFn.current;
      }

			
			</code>

			</pre>

			</section>
			<section>
				<p>
					<a href="https://ahooks.js.org/zh-CN/hooks/use-reactive"
						target="_blank">useReactive</a>
				</p>
				<p>Understanding from source code</p>
				<pre>
			<code data-trim data-noescape  class="js" data-line-numbers>
				function useReactive(initialState: S): S {
					const update = useUpdate();
					const stateRef = useRef(initialState);
				      
					const state = useCreation(() => {
					  return observer(stateRef.current, () => {
					    update();
					  });
					}, []);
				      
					return state;
				      }
			
			</code>

			</pre>

			</section>
			<section>
				<p>useReactive DEMO</p>
				<a href="https://codesandbox.io/s/7iwy5?file=/App.tsx"
					target="_blank">https://codesandbox.io/s/7iwy5?file=/App.tsx</a>
			</section>

			<section>
				<h3>Reactåç»­å‘å±•å±•æœ›</h3>
				<h4>å»classåŒ–ï¼Œåœ¨å‡½æ•°å¼å’±ä¸Šè¶Šèµ°è¶Šè¿œ</h4>
					<ul>
						<li>
							New featurä¸æ–­ä»¥Hooksçš„æ–¹å¼å‘å¸ƒå‡ºæ¥

						</li>
						<li>
							å›´ç»•Hooksçš„å„ç§ä½“éªŒä¼˜åŒ–ï¼Œæ¯”å¦‚React Forget (React without memo)

						</li>
						<li>
							ç¤¾åŒºä¸­æ›´å¤šæ›´å¥½çš„Hooks Utility, å°è£…ç¨‹åº¦å’ŒæŠ½è±¡ç¨‹åº¦ä¸æ–­æé«˜

						</li>
					</ul>
			</section>
			
			<section>
				<h3>Server Side Rendering</h3>
					<ul>
						<li>
							Streaming SSR & Selective Hydration based on Suspense

						</li>
						<li>
							Next.js
						</li>
					</ul>
			</section>
			<section>
				<h3>Concurrent Modeè½¬æ­£ï¼Ÿï¼Ÿ</h3>
				<p>å›´ç»•concurrent modeçš„å‘¨è¾¹æ›´æ–°ï¼Œç‰¹åˆ«æ˜¯ä¸‰æ–¹åº“çš„æ›´æ–°å’ŒæŒ‘æˆ˜</p>
					<ul>
						<li>
							çº¯åŸºäºHooksçš„çŠ¶æ€ç®¡ç†åº“

						</li>
						<li>
							OSåŒ–ï¼Œreactå®šä½å‘æ¡†æ¶è½¬å˜(æœ‰ç‚¹ç‚¹è‹—å¤´)
						</li>
					</ul>
			</section>
			<section>
				Thank You
			</section>







		</div>
	</div>

	<script src="dist/reveal.js"></script>
	<script src="plugin/notes/notes.js"></script>
	<script src="plugin/markdown/markdown.js"></script>
	<script src="plugin/highlight/highlight.js"></script>
	<script>
		// More info about initialization & config:
		// - https://revealjs.com/initialization/
		// - https://revealjs.com/config/
		Reveal.initialize({
			controls: true,
			progress: true,
			center: true,
			hash: true,


			// Learn about plugins: https://revealjs.com/plugins/
			plugins: [RevealMarkdown, RevealHighlight, RevealNotes]
		});
	</script>
</body>

</html>