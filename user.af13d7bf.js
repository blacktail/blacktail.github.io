(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{1003:function(e,t,n){"use strict";n.r(t);n(846);var r=n(997),a=(n(848),n(998)),o=(n(995),n(993)),c=(n(996),n(991)),i=(n(367),n(253)),u=(n(370),n(192)),s=(n(375),n(128)),l=n(0),p=n.n(l),f=n(186),g=n(1006),d=n(990),h=n(67),m=n.n(h),y=n(818),b=n.n(y),w=n(827),v=n.n(w),O={name:"gmap",state:{locations:[],shapes:[],isPolygon:!1,center:null,mapBusy:!1},effects:function(){return{generateLocations:function(){var e=arguments,t=this;return b()(m.a.mark((function n(){var r,a,o;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:for(r=e.length>0&&void 0!==e[0]?e[0]:5e3,a=[],o=0;o<r;o+=1)a.push([v()(-90,90,!0),v()(-180,180,!0)]);t.update({locations:a,center:null,isPolygon:!1,shapes:[]});case 4:case"end":return n.stop()}}),n)})))()},removeLocations:function(){var e=this;return b()(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.update({locations:[]});case 1:case"end":return t.stop()}}),t)})))()},togglePolygon:function(e){var t=this;return b()(m.a.mark((function n(){return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t.update({isPolygon:!!e.isPolygon});case 1:case"end":return n.stop()}}),n)})))()},setCenterLocation:function(e){var t=this;return b()(m.a.mark((function n(){return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t.update({center:e.location});case 1:case"end":return n.stop()}}),n)})))()},setShapes:function(e){var t=this;return b()(m.a.mark((function n(){return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t.update({shapes:e.shapes,locations:[],isPolygon:!1,center:null});case 1:case"end":return n.stop()}}),n)})))()},setMapBusy:function(e){var t=this;return b()(m.a.mark((function n(){return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t.update({mapBusy:e.busy});case 1:case"end":return n.stop()}}),n)})))()}}},reducers:{update:function(e,t){Object.assign(e,t)}}};var j=n(8),x=n.n(j);function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){x()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function E(e){return new Promise((function(t){setTimeout((function(){return t()}),e)}))}var C=0;function M(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e+C;return C+=1,t}function L(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return null!=e?e.toLocaleString(void 0,P({minimumFractionDigits:t,maximumFractionDigits:t},n)):""}function S(){for(var e=[],t=0;t<3;t+=1){var n=v()(0,255);e.push(n)}return e.push(1),"rgba(".concat(e.join(","),")")}n(1002),n(1001),n(1005);function B(){var e=document.createElement("div");e.style.backgroundColor="#fff",e.style.border="2px solid #fff",e.style.borderRadius="3px",e.style.boxShadow="0 2px 6px rgba(0,0,0,.3)",e.style.cursor="pointer",e.style.marginBottom="22px",e.style.textAlign="center",e.title="Click to recenter the map";var t=document.createElement("div");return t.style.color="rgb(25,25,25)",t.style.fontFamily="Roboto,Arial,sans-serif",t.style.fontSize="16px",t.style.lineHeight="38px",t.style.paddingLeft="5px",t.style.paddingRight="5px",t.innerHTML="Change Polygon Fill Color",e.appendChild(t),e.addEventListener("click",(function(){})),e}n(856);var F=n(992);function D(e,t,n,r){var a=n.map(r||function(e){return{lat:e[0],lng:e[1]}});t&&(a=a.filter((function(e){return t.contains(e)})));var o=new window.google.maps.Polygon({paths:a,strokeColor:"#FF0000",strokeOpacity:.8,strokeWeight:2,fillColor:"#FF0000",fillOpacity:.35});return o.setMap(e),o}function R(e,t,n){return z.apply(this,arguments)}function z(){return(z=b()(m.a.mark((function e(t,n,r){var a,o,c,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return F.a.warn({content:"Please wait for drawing..."}),t.fitBounds({east:167.53058104383695,west:99.91385130750884,north:-12.493260954896456,south:-38.499036253493536}),r({type:"gmap/setMapBusy",payload:{busy:!0}}),e.next=5,E(50);case 5:o=[],c=0;case 7:if(!(c<n.length)){e.next=23;break}if(i=n[c],c%20!=0){e.next=12;break}return e.next=12,E(10);case 12:e.t0=null==i||null===(a=i.geometry)||void 0===a?void 0:a.type,e.next="MultiPolygon"===e.t0?15:"Polygon"===e.t0?17:19;break;case 15:return i.geometry.coordinates.forEach((function(e){o.push(D(t,null,e[0],(function(e){return{lat:e[1],lng:e[0]}})))})),e.abrupt("break",20);case 17:return i.geometry.coordinates.forEach((function(e){o.push(D(t,null,e,(function(e){return{lat:e[1],lng:e[0]}})))})),e.abrupt("break",20);case 19:return e.abrupt("break",20);case 20:c+=1,e.next=7;break;case 23:return r({type:"gmap/setMapBusy",payload:{busy:!1}}),F.a.destroyAll(),e.abrupt("return",o);case 26:case"end":return e.stop()}}),e)})))).apply(this,arguments)}window.gmapPromise=new Promise((function(e){window.google?e():window.initMap=function(){e()}}));var A=function(e){var t=e.locations,n=void 0===t?[]:t,r=e.isPolygon,a=void 0!==r&&r,o=e.center,c=e.shapes,i=Object(f.c)(),u=Object(f.i)(null),s=Object(f.i)(null),l=Object(f.i)([]),g=Object(f.i)(null),d=Object(f.i)(null),h=Object(f.i)(null),y=Object(f.a)((function(){i({type:"gmap/togglePolygon",payload:{isPolygon:!0}})}),[i]);return Object(f.b)((function(){function e(){return(e=b()(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.gmapPromise;case 2:s.current=new window.google.maps.Map(u.current,{center:{lat:30.5728,lng:104.0668},zoom:6}),(t=s.current).addListener("rightclick",(function(){0===c.length&&y(!0)})),(n=B()).addEventListener("click",(function(){d.current&&d.current.setOptions({fillColor:S()}),h.current&&h.current.forEach((function(e){e.setOptions({fillColor:S()})}))})),t.controls[window.google.maps.ControlPosition.TOP_CENTER].push(n);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()})),Object(f.d)((function(){function e(){return(e=b()(m.a.mark((function e(){var t,r,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s.current){e.next=14;break}if(t=s.current,r="ABCDEFGHIJKLMNOPQRSTUVWXYZ",g.current&&g.current.setMap(null),l.current&&l.current.length>0){for(o=0;o<l.current.length;o+=1)l.current[o].setMap(null);l.current=null}if(d.current&&(d.current.setMap(null),d.current=null),h.current&&(h.current.forEach((function(e){return e.setMap(null)})),h.current=null),!(c&&c.length>0)){e.next=13;break}return e.next=10,R(t,c,i);case 10:h.current=e.sent,e.next=14;break;case 13:n.length>0&&(a?d.current=D(t,t.getBounds(),n):(l.current=n.map((function(e,t){return new window.google.maps.Marker({position:{lat:e[0],lng:e[1]},label:r[t%r.length]})})),g.current=new window.MarkerClusterer(s.current,l.current,{imagePath:"https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m"})));case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[i,a,n,c]),Object(f.d)((function(){s.current&&o&&s.current.setCenter({lat:o[0],lng:o[1]})}),[o]),p.a.createElement("div",{id:"map",ref:u,style:{width:"100%",height:"100%"}},"Map Initializing...")},T=(n(994),n(989)),I=(n(368),n(254)),U=n(1004),G=n(865),H=n.n(G);var J=function(e){var t=e.locations,n=e.isPolygon,r=Object(f.c)(),a=Object(U.a)(),o=(a.width,a.height),c=Object(f.g)((function(){return n?[]:t}),[n,t]),i=Object(f.a)((function(e){r({type:"gmap/setCenterLocation",payload:{location:e}})}),[r]),u=Object(f.g)((function(){return[{title:"Map Markers",dataIndex:"index",render:function(e,t){return p.a.createElement(I.a,{title:"Click to center the map using this point"},p.a.createElement("div",null,L(t[0],4),", ",L(t[1],4)))}}]}),[]);return p.a.createElement(T.a,{className:H.a.table,size:"small",onRow:function(e){return{onClick:function(){i(e)}}},rowKey:function(){return M("row")},dataSource:c,columns:u,scroll:{y:o-350},pagination:{pageSize:25,hideOnSinglePage:!0,showLessItems:!0,showSizeChanger:!1}})},N=s.a.Content;t.default=function(){Object(f.h)(O);var e=Object(f.c)(),t=Object(f.j)((function(e){return e.gmap.locations})),n=Object(f.j)((function(e){return e.gmap.isPolygon})),l=Object(f.j)((function(e){return e.gmap.center})),h=Object(f.j)((function(e){return e.gmap.mapBusy})),m=Object(f.j)((function(e){return e.gmap.shapes})),y=Object(f.a)((function(){e({type:"gmap/generateLocations"})}),[e]),b=Object(f.a)((function(t){e({type:"gmap/setShapes",payload:{shapes:t}})}),[e]);return p.a.createElement(p.a.Fragment,null,p.a.createElement(o.a,{style:{padding:0,marginBottom:"10px"},title:"Google Map Demo",extra:p.a.createElement(c.a,{beforeUpload:function(e){var t=[];return Object(d.a)(e.stream()).then((function(e){return e.read().then((function n(r){return r.done?(u.b.success("Read File Success"),void b(t)):(t.push(r.value),e.read().then(n))}))})).catch((function(e){console.error(e.stack),u.b.error("Error occurs when read the shape file, please retry.")})),!1},showUploadList:!1},p.a.createElement(i.a,{disabled:h,icon:p.a.createElement(g.a,null)},"Click to Upload Shapes"))}),p.a.createElement(N,{style:{overflow:"auto",height:"calc(100% - 42px)"}},p.a.createElement(r.a,{type:"flex",style:{height:"100%"}},p.a.createElement(a.a,{span:16,style:{height:"100%"}},p.a.createElement(A,{locations:t,isPolygon:n,center:l,shapes:m})),p.a.createElement(a.a,{span:8,style:{height:"100%"}},p.a.createElement(s.a,{style:{height:"100%",background:"white"}},p.a.createElement(N,{style:{overflow:"auto"}},p.a.createElement(J,{locations:t,isPolygon:n})),p.a.createElement("div",{style:{textAlign:"center",marginTop:"20px"}},p.a.createElement(i.a,{type:"primary",onClick:y,disabled:h},"Generate Markers")))))))}},865:function(e,t,n){e.exports={table:"_2b7DaAtr"}}}]);